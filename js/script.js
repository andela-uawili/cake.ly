var seedData = {
  cakes: [
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/home-bg_t1rosa.jpg'
    },
    {
      name:'Berry Pi',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/Cake_Hd_Walpapers-007_cyi2o3.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/amazingly_delicious_cake_aece2d.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/home-bg_t1rosa.jpg'
    },
    {
      name:'Berry Pi',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/Cake_Hd_Walpapers-007_cyi2o3.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/amazingly_delicious_cake_aece2d.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/home-bg_t1rosa.jpg'
    },
    {
      name:'Berry Pi',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/Cake_Hd_Walpapers-007_cyi2o3.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/amazingly_delicious_cake_aece2d.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/home-bg_t1rosa.jpg'
    },
    {
      name:'Berry Pi',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/Cake_Hd_Walpapers-007_cyi2o3.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/amazingly_delicious_cake_aece2d.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/home-bg_t1rosa.jpg'
    },
    {
      name:'Berry Pi',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/Cake_Hd_Walpapers-007_cyi2o3.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/amazingly_delicious_cake_aece2d.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/home-bg_t1rosa.jpg'
    },
    {
      name:'Berry Pi',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/Cake_Hd_Walpapers-007_cyi2o3.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/amazingly_delicious_cake_aece2d.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'3999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/home-bg_t1rosa.jpg'
    },
    {
      name:'Berry Pi',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'1999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/Cake_Hd_Walpapers-007_cyi2o3.jpg'
    },
    {
      name:'Caramel Heart',
      description: 'Caramel fluff and icing with fruity Strawberry toppings!',
      price:'2999.99',
      imageSrc:'http://res.cloudinary.com/awiliuzo/image/upload/c_fill,w_100,h_100/v1453842919/amazingly_delicious_cake_aece2d.jpg'
    }

  ]
}
var carouselThumb
var flicker = {
  $carouselMain: $('.ck-main-carousel'),
  $carouselThumb: $('.ck-thumb-carousel'),
  thumbItemSample: '<div class="carousel-item imgFilled"><img src="#"/><div class="overlay"></div></div>',
  mainItemSample: '<div class="carousel-item imgFilled"><img src="#"/><div class="overlay"><div class="details"><h1 class="title"></h1><p class="description"></p><p class="amount"></p><button>ORDER NOW</button></div></div></div>',

  flickityConfig: {
    cellSelector: '.carousel-item',
    setGallerySize: false,
    freeScroll: true,
    wrapAround: true,
    autoPlay: 6000,
    imagesLoaded: true,
    pageDots: false,
    prevNextButtons: false,
    selectedAttraction: 0.01,
    friction: 0.15
  },
  init: function() {
    //populate the galleries:
    for (var i = 0; i < 21; i++ ) {
      var cake = seedData.cakes[i]
      var carouselItem = $(this.thumbItemSample)
      var carouselItem2 = $(this.mainItemSample)
      var largeImg = cake.imageSrc.split('/c_fill,w_100,h_100').join('')
      carouselItem.find('img').attr('src',cake.imageSrc)
      this.$carouselThumb.append(carouselItem)
      carouselItem2.find('img').attr('src',largeImg)
      carouselItem2.find('.title').text(cake.name)
      carouselItem2.find('.description').text(cake.description)
      carouselItem2.find('.amount').text('Starts at \u20A6 ' + cake.price)
      carouselItem2.find('.amount').data('val', cake.price)
      carouselItem2.find('button').click(function() {
        sideBar.open()
        carouselThumb.data('flickity').deactivatePlayer()
      })
      this.$carouselMain.append(carouselItem2)
    }

    carouselThumb = this.$carouselThumb.flickity(this.flickityConfig)
    this.flickityConfig.autoPlay = false
    var carouselMain = this.$carouselMain.flickity(this.flickityConfig)

    carouselThumb.on( 'staticClick', function(event, pointer, cellElement, cellIndex) {
      carouselMain.flickity( 'select', cellIndex)
      carouselThumb.flickity( 'select', cellIndex)
      carouselThumb.data('flickity').activatePlayer()
    })

    carouselThumb.on( 'cellSelect', function() {
      carouselMain.flickity( 'select', carouselThumb.data('flickity').selectedIndex)
    })
  }
}

var navbar = {
  $element: $('.ck-navbar'),

  show: function() {
    this.$element.addClass('open')
  }
}

hero = {
  $browseBtn: $('.ck-hero-content button'),
  $baseElement: $('.ck-hero'),

  init: function() {
    this.$browseBtn.click(function() {
      $('.details').fadeIn(1000)
      navbar.show()
      hero.$baseElement.fadeOut()
    })
  }
}
var main = {
  $baseElement: $('main'),
  $collapsedMain: $('main.collapse')
}

var cover = {
  $baseElement: $('.ck-cover'),

  init: function() {
    this.$baseElement.click(function() {
      form.$defaultRadio.prop('checked', true)
      sideBar.$baseElement.removeClass('open')
      main.$baseElement.removeClass('collapse')
      $(this).removeClass('open')
      carouselThumb.data('flickity').activatePlayer()
    })
  }
}

var carousels = {
  $mainCarouselButton: $('.ck-main-carousel .carousel-item .details'),

  init: function() {
    this.$mainCarouselButton.click(function() {
      sideBar.open()
      carouselThumb.data('flickity').deactivatePlayer()
    })
  }
}

var sideBar = {
  $baseElement: $('.ck-sidebar'),
  $title: $('.order-form .title'),
  $desc: $('.order-form .description'),
  $amount: $('.order-form .amount'),

  open: function() {
    $selectedCarouselTitle = $('.is-selected .details .title').text()
    $selectedCarouselDesc = $('.is-selected .details .description').text()
    $selectedCarouselAmount = $('.is-selected .details .amount').data('val')
    sideBar.$title.text($selectedCarouselTitle)
    sideBar.$desc.text($selectedCarouselDesc)
    sideBar.$amount.text('\u20A6 ' + $selectedCarouselAmount)
    sideBar.$amount.data('val', $selectedCarouselAmount)
    form.$form.css('visibility', 'visible')
    sideBar.$baseElement.addClass('open')
    cover.$baseElement.addClass('open')
    main.$baseElement.addClass('collapse')
  }
}

var imageLiquid = {
  config: {
    filled: {
      fill: true,
      horizontalAlign: "center",
      verticalAlign: "center"
    },
    fitted: {
      fill: false,
      horizontalAlign: "center",
      verticalAlign: "center"
    }
  },

  init: function(customConfig){
    $('.imgFilled').imgLiquid(imageLiquid.config.filled)
    $('.imgFitted').imgLiquid(imageLiquid.config.fitted)
  }
}

var form = {
  $form: $('.order-form'),
  $button: $('.order-form button'),
  $size: $('.size'),
  $amount: $('.order-form .amount'),
  $defaultRadio: $('#default'),

  formInit: function() {
    this.$form.submit(function(event) {
      event.preventDefault()
      form.$form.css('visibility', 'hidden')
      $.when($('<p class="response hidden">Thanks for the purchase</p>').insertBefore($('.order-form')).fadeIn(1000).delay(2000).fadeOut(1000)).done(function() {
        cover.$baseElement.click()
      })
    })
  },
  sizeInit: function() {
    this.$size.map(function() {
      $(this).click(function(e) {
        var value = e.target.value
        form.$amount.text('\u20A6 ' + (parseFloat(form.$amount.data('val') * value)))
      })
    })
  },
  init: function() {
    this.formInit()
    this.sizeInit()
  }
}

$(document).ready(function(){
  hero.init()
  form.init()
  carousels.init()
  cover.init()
  flicker.init()
  imageLiquid.init()

})
